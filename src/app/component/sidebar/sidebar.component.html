<!-- <aside class="flex w-16 flex-col items-center bg-indigo-900 py-4 text-white">
  <div class="mb-8 flex flex-col items-center">
    <div class="mb-2 rounded p-3 hover:bg-indigo-800">
      <i class="far fa-folder text-xl"></i>
    </div>
    <span class="text-xs">Views</span>
  </div>

  <div class="mb-8 flex flex-col items-center">
    <div class="mb-2 rounded p-3 hover:bg-indigo-800">
      <i class="fas fa-tag text-xl"></i>
    </div>
    <span class="text-xs">Tags</span>
  </div>
</aside> -->



<!-- Main Content Area -->
<!-- <div class="flex flex-1 overflow-hidden"> -->
<!-- Sidebar -->
<!-- <aside class="flex w-16 flex-col items-center h-screen bg-indigo-900 py-4 text-white"> -->
<!-- Views -->
<!-- <div class="mb-8 flex flex-col items-center">
      <div class="mb-2 rounded p-3 hover:bg-indigo-800">
        <i class="far fa-folder text-xl"></i>
      </div>
      <span class="text-xs">Views</span>
    </div> -->

<!-- Tags -->
<!-- <div class="mb-8 flex flex-col items-center">
      <div class="mb-2 rounded p-3 hover:bg-indigo-800">
        <i class="fas fa-tag text-xl"></i>
      </div>
      <span class="text-xs">Tags</span>
    </div>
  </aside> -->
<!-- </div> -->




<!-- Main Sidebar Component -->
<div
  class="fixed inset-y-0 left-0 z-30 w-64 bg-white shadow-xl transform transition-transform duration-300 ease-in-out border-r border-gray-200"
  [ngClass]="{'translate-x-0': sidebarOpen, '-translate-x-full': !sidebarOpen, 'md:translate-x-0': true}">

  <!-- Sidebar Header with Brand -->
  <div class="p-4 border-b border-gray-200 bg-gradient-to-r from-slate-800 to-slate-700">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <div
          class="p-1.5 rounded-full bg-gradient-to-br from-blue-400 to-indigo-600 shadow-md group-hover:shadow-indigo-500/30 transition-all duration-300">
          <i class="fas fa-headset text-white text-lg"></i>
        </div>
        <div class="flex flex-col">
          <span class="font-bold text-white text-lg tracking-tight">Feedback Hub</span>
          <span class="text-xs text-blue-300">Enterprise Edition</span>
        </div>
      </div>
      <!-- Mobile Close Button -->
      <button (click)="toggleSidebar()" class="md:hidden text-white hover:text-gray-200 transition-colors">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>

  <!-- User Quick Profile with Role Badge -->
  <div class="px-4 py-3 border-b border-gray-200 bg-gray-50">
    <div class="flex items-center space-x-3">
      <div
        class="h-10 w-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-medium uppercase shadow-sm ring-2 ring-white">
        {{ userInitials }}
      </div>
      <div class="flex-1 min-w-0">
        <p class="text-sm font-medium text-gray-900 truncate">{{ username }}</p>
        <div class="flex items-center mt-0.5">
          <!-- Role badge -->
          <span class="inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium shadow-sm" [ngClass]="{
              'bg-purple-100 text-purple-800': role === 'admin',
              'bg-blue-100 text-blue-800': role === 'hod',
              'bg-green-100 text-green-800': role === 'employee',
              'bg-yellow-100 text-yellow-800': role === 'client'
            }">
            <i class="mr-0.5 fa-sm" [ngClass]="{
                'fas fa-user-shield': role === 'admin',
                'fas fa-user-tie': role === 'hod',
                'fas fa-user': role === 'employee',
                'fas fa-user-alt': role === 'client'
              }"></i>
            {{ formatRoleDisplay(role) }}
          </span>
        </div>
      </div>
      <!-- Status indicator -->
      <div class="flex items-center">
        <span class="w-2.5 h-2.5 rounded-full bg-green-500 mr-1.5 animate-pulse-subtle"></span>
        <span class="text-xs font-medium text-gray-600">Online</span>
      </div>
    </div>
  </div>

  <!-- Sidebar Navigation with Enhanced Scrolling -->
  <div class="p-4 space-y-1 overflow-y-auto custom-scrollbar" style="max-height: calc(100vh - 180px)">
    <!-- Dashboard Link -->
    <a [routerLink]="['/', role, 'dashboard']" routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
      class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
      <div
        class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
        <i class="fas fa-tachometer-alt"></i>
      </div>
      <span>Dashboard</span>
    </a>

    <!-- Complaints Management Section -->
    <div class="pt-4">
      <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider section-title">COMPLAINTS</p>

      <a [routerLink]="['/', role, 'complaints']" routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 mt-1 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-clipboard-list"></i>
        </div>
        <span>All Complaints</span>
      </a>

      <a [routerLink]="['/', role, 'assigned-complaints']"
        routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-tasks"></i>
        </div>
        <span>Assigned to Me</span>
        <span *ngIf="assignedCount > 0"
          class="ml-auto bg-blue-100 text-blue-800 text-xs font-medium px-2 py-0.5 rounded-full count-badge">
          {{ assignedCount }}
        </span>
      </a>

      <a [routerLink]="['/', role, 'created-complaints']"
        routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-pen-alt"></i>
        </div>
        <span>Created by Me</span>
      </a>

      <a [routerLink]="['/', role, 'urgent-complaints']"
        routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-exclamation-circle"></i>
        </div>
        <span>Urgent</span>
        <span *ngIf="urgentCount > 0"
          class="ml-auto bg-red-100 text-red-800 text-xs font-medium px-2 py-0.5 rounded-full count-badge urgent-badge">
          {{ urgentCount }}
        </span>
      </a>
    </div>

    <!-- Suggestions Section -->
    <div class="pt-4">
      <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider section-title">SUGGESTIONS</p>

      <a [routerLink]="['/', role, 'suggestions']"
        routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 mt-1 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-lightbulb"></i>
        </div>
        <span>All Suggestions</span>
      </a>

      <a [routerLink]="['/', role, 'top-suggestions']"
        routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-star"></i>
        </div>
        <span>Top Rated</span>
      </a>
    </div>

    <!-- Analytics Section -->
    <div class="pt-4">
      <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider section-title">ANALYTICS</p>

      <a [routerLink]="['/', role, 'performance']"
        routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 mt-1 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-chart-line"></i>
        </div>
        <span>Performance</span>
      </a>

      <a [routerLink]="['/', role, 'trends']" routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-chart-pie"></i>
        </div>
        <span>Trends</span>
      </a>

      <a [routerLink]="['/', role, 'reports']" routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-file-alt"></i>
        </div>
        <span>Reports</span>
      </a>
    </div>

    <!-- Admin-only section -->
    <div *ngIf="role === 'admin' || role === 'hod'" class="pt-4">
      <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider section-title">ADMINISTRATION</p>

      <a [routerLink]="['/', role, 'users']" routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 mt-1 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-users"></i>
        </div>
        <span>User Management</span>
      </a>

      <a [routerLink]="['/', role, 'departments']"
        routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-building"></i>
        </div>
        <span>Departments</span>
      </a>

      <a [routerLink]="['/', role, 'settings']" routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-cog"></i>
        </div>
        <span>System Settings</span>
      </a>
    </div>

    <!-- Knowledge Base Section -->
    <div class="pt-4">
      <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider section-title">RESOURCES</p>

      <a [routerLink]="['/', role, 'knowledge-base']"
        routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 mt-1 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-book"></i>
        </div>
        <span>Knowledge Base</span>
      </a>

      <a [routerLink]="['/', role, 'faq']" routerLinkActive="bg-blue-50 text-blue-700 border-l-4 border-blue-600"
        class="flex items-center py-2.5 px-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-all duration-200 group nav-link">
        <div
          class="w-6 h-6 flex items-center justify-center rounded-lg mr-3 text-gray-500 group-hover:text-blue-600 group-hover:bg-blue-100/50 transition-colors">
          <i class="fas fa-question-circle"></i>
        </div>
        <span>FAQs</span>
      </a>
    </div>
  </div>

  <!-- Quick Actions Section with Enhanced Buttons -->
  <div class="mt-auto p-4 border-t border-gray-200 bg-gray-50">
    <button (click)="openFeedbackForm()"
      class="w-full flex items-center justify-center px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 rounded-lg transition-all shadow-sm hover:shadow action-button">
      <i class="fas fa-plus mr-2"></i> New Complaint
    </button>

    <!-- Secondary Action -->
    <button (click)="openSuggestionForm()"
      class="mt-2 w-full flex items-center justify-center px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 rounded-lg transition-all shadow-sm hover:shadow action-button">
      <i class="fas fa-lightbulb mr-2"></i> New Suggestion
    </button>

    <!-- Help & Support -->
    <a [routerLink]="['/help']"
      class="mt-3 w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
      <i class="fas fa-question-circle mr-2"></i> Help & Support
    </a>
  </div>
</div>

<!-- Sidebar Backdrop (Mobile) with Improved Blur -->
<div *ngIf="sidebarOpen" (click)="toggleSidebar()"
  class="fixed inset-0 z-20 bg-black bg-opacity-50 transition-opacity md:hidden backdrop-blur-sm backdrop">
</div>

<!-- Toggle Button (Mobile) with Enhanced Animation -->
<button *ngIf="!sidebarOpen" (click)="toggleSidebar()"
  class="fixed bottom-5 left-5 z-30 p-3 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-full shadow-lg md:hidden hover:shadow-indigo-500/30 transition-all toggle-button">
  <i class="fas fa-bars"></i>
</button>